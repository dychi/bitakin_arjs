<!DOCTYPE html>
<!-- ① スクリプトの読み込み -->
<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.2/aframe/build/aframe-ar.js"></script>
<script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.2.0/dist/aframe-extras.min.js"></script>
<script>
  AFRAME.registerComponent('change-color-with-click', {
      init: function () {
          var markerId = this.el.id;
          console.log(markerId);
          var boxId = markerId + "-box";
          console.log(boxId);
          var box = document.querySelector("#" + boxId);
          console.log(box);
          box.addEventListener('click', function () {
              console.log("Clicked,", markerId);
              box.setAttribute('material', 'color', 'red');
          });
      }
  });
</script>
<body style='margin: 0; overflow: hidden;'>

<!-- シーンの追加とデバックUIを非表示 -->
<a-scene embedded arjs="debugUIEnabled:false;">
  <a-entity camera look-controls>
    <a-entity cursor="rayOrigin: mouse"></a-entity>
  </a-entity>
  <a-assets>
    <img id="background" crossorigin="anonymous" src="https://dychi.github.io/bitakin_arjs/imgs/safari.jpg">
  </a-assets>

  <!-- 芝 -->
  <a-marker type='pattern' url='./patterns/grass.patt' id="grass" change-color-with-click>
    <!-- オブジェクトの追加 -->
    <a-entity gltf-model="src: url(./assets/grass/grass_weed_model.gltf);"
              animation-mixer="loop: pingpong;"
              position="-0.5 0.1 0.5"
              rotation="-90 0 0"
              scale="0.15 0.15 0.15"
              shadow="receive: true"></a-entity>

    <a-box position="0 0.5 0" wireframe="true" color="#006400" id="grass-box"></a-box>

  </a-marker>

  <!-- キリン -->
  <a-marker type='pattern' url='./patterns/giraffe.patt' id="giraffe" change-color-with-click>
    <!-- オブジェクトの追加 -->
    <a-entity gltf-model="src: url(./assets/giraffe/giraffe.gltf);"
              animation-mixer="loop: pingpong;"
              position="0 0.1 1"
              rotation="-90 0 0"
              scale="0.01 0.01 0.01"
              shadow="receive: true"></a-entity>

    <a-box position="0 0.5 0" wireframe="true" id="giraffe-box"></a-box>
    <a-plane src="#background"
             position="0 -4 0"
             rotation="-90 0 0"
             width="4"
             height="4"></a-plane>

  </a-marker>
  
  <!-- パンダ -->
  <a-marker type='pattern' url='./patterns/panda.patt' >
    <!-- オブジェクトの追加 -->
    <a-entity gltf-model="src: url(./assets/panda/panda.gltf);"
              animation-mixer="loop: pingpong;"
              position="0 0.1 1"
              rotation="-90 0 0"
              scale="0.05 0.05 0.05"
              shadow="receive: true"></a-entity>

    <a-box position="0 0.5 0" wireframe="true" id="panda-box" detectmarker></a-box>

  </a-marker>

  <!-- しろくま -->
  <!-- ライオン -->
  <!-- 子鹿 -->
  <!-- ワニ -->
  <!-- イルカ -->
  <!-- 象 -->
  <!-- アライグマ -->
  <!-- ねこ -->
  <!-- キツネ -->
  <!-- ひつじ -->

  <a-entity camera></a-entity>
</a-scene>
</body>
</html>
