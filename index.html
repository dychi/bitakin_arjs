<!DOCTYPE html>
<!-- â‘  ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª­ã¿è¾¼ã¿ -->
<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.2/aframe/build/aframe-ar.js"></script>
<script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.2.0/dist/aframe-extras.min.js"></script>
<script>
  AFRAME.registerComponent('clickobjects', {
    schema: {
        color: {default: 'red'}
    },

    init: function () {
      // var objects = document.querySelector('#grass-marker');
      var marker = this.el;
      var defaulColor = marker.getAttribute('material').color;

      marker.addEventListener('click', function(evt) {
        var markerId = marker.id;
        console.log('Marker ID:', markerId);
        console.log('Objects Clicked.');
        console.log(defaulColor);
        marker.setAttribute('material', defaulColor);
        // ++count
        // console.log('Count:', count);
      });

      marker.addEventListener('plane-click', function(evt) {
        console.log('Plane Click');
      });
    }
  });
</script>
<script>
  console.log('Log First!');
  if(document.querySelector("padna-box").object3D.visible == true){
      console.log('box visible.');
  }
  AFRAME.registerComponent('detectmarker', {
      init: function () {
          var marker = this.el;

          marker.addEventListener('markerFound', function () {
              var markerId = marker.id;
              console.log(markerId);
              marker.setAttribute('material', 'color: blue');
          });
      }
  });
</script>
<body style='margin: 0; overflow: hidden;'>

<!-- ã‚·ãƒ¼ãƒ³ã®è¿½åŠ ã¨ãƒ‡ãƒãƒƒã‚¯UIã‚’éžè¡¨ç¤º -->
<a-scene embedded arjs="debugUIEnabled:false;">
  <a-assets>
    <img id="background" crossorigin="anonymous" src="https://dychi.github.io/bitakin_arjs/imgs/safari.jpg">
  </a-assets>

  <!-- èŠ -->
  <a-marker type='pattern' url='./patterns/grass.patt' id="grass-marker">
    <!-- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¿½åŠ  -->
    <a-entity gltf-model="src: url(./assets/grass/grass_weed_model.gltf);"
              animation-mixer="loop: pingpong;"
              position="-0.5 0.1 0.5"
              rotation="-90 0 0"
              scale="0.15 0.15 0.15"
              shadow="receive: true"></a-entity>

    <a-box position="0 0.5 0" wireframe="true" color="#006400" clickobjects="color: red"></a-box>

  </a-marker>

  <!-- ã‚­ãƒªãƒ³ -->
  <a-marker type='pattern' url='./patterns/giraffe.patt' id="giraffe-marker">
    <!-- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¿½åŠ  -->
    <a-entity gltf-model="src: url(./assets/giraffe/giraffe.gltf);"
              animation-mixer="loop: pingpong;"
              position="0 0.1 1"
              rotation="-90 0 0"
              scale="0.01 0.01 0.01"
              shadow="receive: true"></a-entity>

    <a-box position="0 0.5 0" wireframe="true"></a-box>
    <a-plane plane-click
             src="#background"
             position="0 -4 0"
             rotation="-90 0 0"
             width="8"
             height="8"></a-plane>

  </a-marker>
  
  <!-- ãƒ‘ãƒ³ãƒ€ -->
  <a-marker type='pattern' url='./patterns/panda.patt' >
    <!-- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¿½åŠ  -->
    <a-entity gltf-model="src: url(./assets/panda/panda.gltf);"
              animation-mixer="loop: pingpong;"
              position="0 0.1 1"
              rotation="-90 0 0"
              scale="0.01 0.01 0.01"
              shadow="receive: true"></a-entity>

    <a-box position="0 0.5 0" wireframe="true" id="panda-box" detectmarker></a-box>

  </a-marker>

  <!-- ã—ã‚ãã¾ -->
  <!-- ãƒ©ã‚¤ã‚ªãƒ³ -->
  <!-- å­é¹¿ -->
  <!-- ãƒ¯ãƒ‹ -->
  <!-- ã‚¤ãƒ«ã‚« -->
  <!-- è±¡ -->
  <!-- ã‚¢ãƒ©ã‚¤ã‚°ãƒž -->
  <!-- ã­ã“ -->
  <!-- ã‚­ãƒ„ãƒ -->
  <!-- ã²ã¤ã˜ -->

  <a-entity camera></a-entity>
</a-scene>
</body>
</html>
